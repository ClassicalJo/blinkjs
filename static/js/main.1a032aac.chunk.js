(this.webpackJsonpblinkjs=this.webpackJsonpblinkjs||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/keyboard.7938c350.svg"},function(e,t,n){e.exports=n.p+"static/media/touchscreen.4ab11d22.svg"},,function(e,t,n){e.exports=n(24)},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(10),a=n.n(r),s=n(2),l=n(6),c=n(4),d=n(3),u=n(5),y=function(e){return i.a.createElement("svg",{zid:"main-svg",viewBox:"-1000 -562.5 2000 1125",preserveAspectRatio:"xMidYMid meet"},i.a.createElement("mask",{id:"transparent"},i.a.createElement("rect",{width:"5000",height:"5000",x:"-2500",y:"-2500",fill:"white"}),i.a.createElement("rect",{width:"2000",height:"1125",x:"-1000",y:"-562.5",fill:"black"})),i.a.createElement("rect",{fill:"black",width:"5000",height:"5000",x:"-2500",y:"-2500"}),e.children,i.a.createElement("rect",{fill:"black",width:"5000",height:"5000",x:"-2500",y:"-2500",mask:"url(#transparent)",pointerEvents:"none"}))},h=n(11),p=n.n(h),m=n(12),b=n.n(m),f=function(e){return i.a.createElement(y,null,i.a.createElement("rect",{fill:"rgba(255,255,255,0.2)",x:-460,y:-460,width:420,height:920}),i.a.createElement("rect",{stroke:"rgba(255,255,255,0.2)",fill:"black",x:-450,y:-450,width:400,height:900,onClick:e.keyboard}),i.a.createElement("image",{width:"250",x:-375,y:-375,xlinkHref:p.a,pointerEvents:"none"}),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:-250,y:100,fill:"white",pointerEvents:"none"}," WASD: Movement"),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:-250,y:150,fill:"white",pointerEvents:"none"},"K: Blink"),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:-250,y:200,fill:"white",pointerEvents:"none"},"L: Fire"),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:-250,y:250,fill:"white",pointerEvents:"none"},"P: Pause"),i.a.createElement("rect",{fill:"rgba(255,255,255,0.2)",x:40,y:-460,width:420,height:920}),i.a.createElement("rect",{stroke:"rgba(255,255,255,0.2)",x:50,y:-450,width:400,height:900,onTouchStart:e.touchscreen}),i.a.createElement("image",{width:"250",x:125,y:-375,xlinkHref:b.a}),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:250,y:100,fill:"white",pointerEvents:"none"}," LeftStick: Movement"),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:250,y:150,fill:"white",pointerEvents:"none"}," A: Blink"),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:250,y:200,fill:"white",pointerEvents:"none"}," B: Fire"),i.a.createElement("text",{fontFamily:"Arial Black",textAnchor:"middle",x:250,y:250,fill:"white",pointerEvents:"none"}," ||: Pause"))},v=function(e,t,n,o){var r="M ".concat(e+n/2," ").concat(t-2*o," L ").concat(e," ").concat(t-o," V ").concat(t-o/4," H ").concat(e+n," V").concat(t-o," Z"),a="M ".concat(e-n/4," ").concat(t-o/2," V ").concat(t+2*o," H ").concat(e-5*n/4," Z"),s="M ".concat(e+5*n/4," ").concat(t-o/2," V ").concat(t+2*o," H ").concat(e+9*n/4," Z");return i.a.createElement("g",null,i.a.createElement("path",{d:r,fill:"white"}),i.a.createElement("path",{d:a,fill:"white"}),i.a.createElement("path",{d:s,fill:"white"}),i.a.createElement("rect",{id:"player",className:"playerGlow",x:e,y:t,width:n,height:o}))},w=function(e){return i.a.createElement(y,null,i.a.createElement("g",{transform:"rotate(90, -262.5, -12.5)"},v(-362.5,-12.5,25,25)),i.a.createElement("text",{y:-100,fill:"white",fontFamily:"Arial Black",fontSize:"80",textAnchor:"middle",alignmentBaseline:"central"},"BlinkJS"),i.a.createElement("rect",{x:-75,y:185,width:"150",height:"80",fill:"rgba(255,255,255,0.1)",cursor:"pointer",onClick:e.start}),i.a.createElement("text",{y:"225",fill:"white",fontFamily:"Arial Black",fontSize:"40",textAnchor:"middle",alignmentBaseline:"central",pointerEvents:"none"},"Start"),i.a.createElement("rect",{x:-200,y:335,width:"400",height:"80",fill:"rgba(255,255,255,0.1)",cursor:"pointer",onClick:e.controller}),i.a.createElement("text",{y:"375",fill:"white",fontFamily:"Arial Black",fontSize:"40",textAnchor:"middle",alignmentBaseline:"central",pointerEvents:"none"},"Select controller"))},g=function(e,t,n){return 0===e&&0===t?1:0===n&&0===t?1:Math.abs(t-e)/Math.abs(t-n)},x=function(e,t,n,o){var i=Math.atan2(o-t,n-e);return(i=360*(i>0?i:2*Math.PI+i)/(2*Math.PI))*Math.PI/180},M={coordinates:function(e,t,n,o,i){var r=x(e,t,n,o);return{x:e+i*Math.cos(r),y:t+i*Math.sin(r)}},getTargetVelocity:function(e,t,n,o,i){var r=x(e,t,n,o);return{x:i*Math.cos(r),y:i*Math.sin(r)}},getTheta:function(e,t,n,o){var i=Math.atan2(o-t,n-e);return(i=360*(i>0?i:2*Math.PI+i)/(2*Math.PI))*Math.PI/180},getTargetDiminishingVelocity:function(e,t,n,o,i,r){var a=x(e,t,n,o);return{x:i*g(e,n,r.x)*Math.cos(a),y:i*g(t,o,r.y)*Math.sin(a)}},orbit:function(e,t,n,o,i,r){var a=Math.atan2(o-t,n-e);return a=360*(a>0?a:2*Math.PI+a)/(2*Math.PI),a=(a+=r)*Math.PI/180,{x:e+i*Math.cos(a),y:t+i*Math.sin(a)}}},k=function(e,t,n){return"\n            M".concat(e," ").concat(t+2*n,"\n        \n            \n            L").concat(e+n/8," ").concat(t," \n            L").concat(e," ").concat(t-2*n," \n            L").concat(e-n/8," ").concat(t," \n            \n            Z")},E=function(e,t,n){return"\n            M".concat(e+n*Math.cos(360*Math.PI/180)," ").concat(t+2*n*Math.sin(300*Math.PI/180),"            \n            L").concat(e+2*n*Math.cos(60*Math.PI/180)," ").concat(t+2*n*Math.sin(60*Math.PI/180),"\n            L").concat(e+2*n*Math.cos(180*Math.PI/180)," ").concat(t+2*n*Math.sin(180*Math.PI/180),"\n            Z")},B=function(e,t,n){return"\n            M".concat(e+n/2*Math.cos(225*Math.PI/180)," ").concat(t+n/2*Math.sin(225*Math.PI/180),"\n            L").concat(e+2*n*Math.cos(270*Math.PI/180)," ").concat(t+2*n*Math.sin(270*Math.PI/180),"\n            L").concat(e+n/2*Math.cos(325*Math.PI/180)," ").concat(t+n/2*Math.sin(325*Math.PI/180),"\n            L").concat(e+2*n*Math.cos(2*Math.PI)," ").concat(t+2*n*Math.sin(2*Math.PI),"\n            L").concat(e+n/2*Math.cos(45*Math.PI/180)," ").concat(t+n/2*Math.sin(45*Math.PI/180),"\n            L").concat(e+2*n*Math.cos(90*Math.PI/180)," ").concat(t+2*n*Math.sin(90*Math.PI/180),"\n            L").concat(e+n/2*Math.cos(135*Math.PI/180)," ").concat(t+n/2*Math.sin(135*Math.PI/180),"\n            L").concat(e+2*n*Math.cos(180*Math.PI/180)," ").concat(t+2*n*Math.sin(180*Math.PI/180),"\n\n            Z\n            ")},S={sakura:function(e,t,n,o,r){return i.a.createElement("g",{key:"0"},i.a.createElement("circle",{key:"3",className:r,cx:e,cy:t,r:n,fill:o}),i.a.createElement("path",{key:"1",d:k(e,t,n),fill:"white"}))},blood:function(e,t,n,o,r){return i.a.createElement("g",{key:"4"},i.a.createElement("circle",{key:"5",className:r,cx:e,cy:t,r:n,fill:o}))},satellite:function(e,t,n,o,r){return i.a.createElement("g",{key:e+t+6},i.a.createElement("circle",{key:"7",className:r,cx:e,cy:t,r:n,fill:o}))},nul:function(e,t,n,o,r){return i.a.createElement("g",{key:e+t+7},i.a.createElement("path",{key:"9",d:E(e,t,n),fill:"purple"}),i.a.createElement("circle",{key:"8",className:r,cx:e,cy:t,r:n,fill:o}))},vida:function(e,t,n,o,r){return i.a.createElement("g",{key:e+t+7},i.a.createElement("path",{key:"9",d:B(e,t,n),fill:"#ccc3b4"}),i.a.createElement("circle",{key:"8",className:r,cx:e,cy:t,r:n,fill:o}))}},I=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.enemySelected&&this.props.select(this.props.enemySelected)}},{key:"render",value:function(){var e=this;return i.a.createElement(y,null,i.a.createElement("text",{y:"-500",fontFamily:"Arial Black",fill:"white",fontSize:"40",textAnchor:"middle",alignmentBaseline:"central"},"Next objective:"),S.blood(225,-225,50,"red",""),S.satellite(225,-300,5,"red",""),S.satellite(225,-150,5,"red",""),i.a.createElement("rect",{x:25,y:-425,width:"400",height:"400",stroke:"white",fill:"transparent",onClick:function(){return e.props.select("scene2")}}),!this.props.blood&&i.a.createElement("rect",{x:25,y:-425,width:"400",height:"400",stroke:"white",fill:"rgba(0,0,0,0.85)"}),S.sakura(-225,-225,50,"pink"),i.a.createElement("rect",{x:-425,y:-425,width:"400",height:"400",stroke:"white",fill:"transparent",onClick:function(){return e.props.select("scene1")}}),!this.props.sakura&&i.a.createElement("rect",{x:-425,y:-425,width:"400",height:"400",stroke:"white",fill:"rgba(0,0,0,0.85)"}),S.nul(-225,225,50,"indigo"),i.a.createElement("rect",{x:-425,y:25,width:"400",height:"400",stroke:"white",fill:"transparent"}),!this.props.nul&&i.a.createElement("rect",{x:-425,y:25,width:"400",height:"400",stroke:"white",fill:"rgba(0,0,0,0.85)"}),S.vida(225,225,50,"#76c34e"),i.a.createElement("rect",{x:25,y:25,width:"400",height:"400",stroke:"white",fill:"transparent"}),!this.props.vida&&i.a.createElement("rect",{x:25,y:25,width:"400",height:"400",stroke:"white",fill:"rgba(0,0,0,0.85)"}))}}]),t}(i.a.PureComponent),O=n(1),P=function e(t,n,o,i,r){var a=this;Object(s.a)(this,e);this.coreColor="lightpink",this.body=O.Bodies.circle(t,n,o,{isSensor:!0}),this.body.hp=i,this.body.maxHp=i,this.body.label="enemy",this.dead=!1,O.World.add(r,this.body),this.remove=function(){a.wait&&clearTimeout(a.wait),O.World.remove(r,a.body)}},j=function e(t,n,o,i){var r=this;Object(s.a)(this,e);this.coreColor="lightpink",this.body=O.Bodies.circle(t,n,o,{isSensor:!0}),this.body.label="wall",O.World.add(i,this.body),this.remove=function(){r.wait&&clearTimeout(r.wait),O.World.remove(i,r.body)}},W=function e(t,n,o,i,r){var a=this;Object(s.a)(this,e),this.body=O.Bodies.circle(t,n,o,{isStatic:!0,isSensor:!0}),this.body.label="barrier",this.body.maxHp=i,this.body.hp=i,this.radius=o,this.danger=Math.ceil(this.body.maxHp/4),this.className="barrier",O.World.add(r,this.body),this.remove=function(){O.World.remove(r,a.body)}},C=n(8),A=n.n(C),H=function e(t,n,o,i,r){var a=this;Object(s.a)(this,e),this.body=O.Bodies.circle(t,n,o,i),this.radius=o,O.World.add(r,this.body),this.remove=function(){O.World.remove(r,a.body)}},F=function e(t,n,o,i,r,a){var l=this;Object(s.a)(this,e),this.body=O.Bodies.rectangle(t,n,o,i,r),this.width=o,this.height=i,O.World.add(a,this.body),this.remove=function(){O.World.remove(a,l.body)}},N=function e(t,n,o,i,r){var a=this;Object(s.a)(this,e);this.body=O.Bodies.circle(t,n,o,{isSensor:!0}),this.body.label="playerBullet",this.radius=o,O.Body.setVelocity(this.body,{x:0,y:-15}),O.World.add(i,this.body),this.checkIfIsOffScreen=setInterval((function(){a.isOffScreen(a.body.position.x,a.body.position.y)&&a.remove()}),16),this.isOffScreen=function(e,t){return e>1e3||e<-1e3||t>500||t<-500},this.remove=function(){clearInterval(a.checkIfIsOffScreen),O.World.remove(i,a.body);for(var e=r.length-1;e>=0;e--)r[e].body.id===a.body.id&&r.splice(e,1)}},L=function e(t){Object(s.a)(this,e),this.ground=new F(0,562.5,2e3,100,{isStatic:!0},t),this.ground.body.label="wall",this.ceiling=new F(0,-562.5,2e3,100,{isStatic:!0},t),this.ceiling.body.label="wall",this.leftWall=new F(-1e3,0,100,1075,{isStatic:!0},t),this.leftWall.body.label="wall",this.rightWall=new F(1e3,0,100,1075,{isStatic:!0},t),this.rightWall.body.label="wall",this.walls=[this.ground,this.ceiling,this.leftWall,this.rightWall]},T=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){n.cycle()},n.cycle=function(){n.updateCycle(),n.loop=requestAnimationFrame((function(){return n.cycle()}))},n.updateCycle=function(){n.setState((function(e){Object.assign({},e.particles);return{particles:n.particles}}))},n.componentWillUnmount=function(){cancelAnimationFrame(n.loop),clearTimeout(n.explosion)},n.state={showPlayer:!0,particles:[]},n.pause=!1,n.engine=O.Engine.create(),n.runner=O.Runner.create(),n.world=n.engine.world,n.world.gravity.y=0,O.Runner.start(n.runner,n.engine),n.particles=[];for(var o=2*Math.PI/20,i=function(e){n.explosion=setTimeout((function(){n.setState({showPlayer:!1});var t=new H(1*Math.cos(e)+n.props.x,-1*Math.sin(e)+n.props.y,10,{},n.world);n.particles.push(t)}),1250)},r=0;r<2*Math.PI;r+=o)i(r);return n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,!0===this.state.showPlayer&&i.a.createElement("rect",{x:this.props.x-this.props.width/2,y:this.props.y-this.props.height/2,width:this.props.width,height:this.props.height,fill:"pink"}),this.state.particles.map((function(t){return i.a.createElement("circle",{key:e.state.particles.indexOf(t),className:"playerGlow disappear",cx:t.body.position.x,cy:t.body.position.y,r:t.radius,fill:"pink"})})),!1===this.state.showPlayer&&i.a.createElement("g",null,i.a.createElement("circle",{className:"appear",r:"250",x:"0",y:"0",fill:"rgba(255,255,255,0.2)",onClick:this.props.restart}),i.a.createElement("text",{className:"appear",fill:"white",textAnchor:"middle",fontFamily:"Arial Black",fontSize:"40",alignmentBaseline:"central",pointerEvents:"none"},"Try again")))}}]),t}(i.a.Component),z=function(e,t){for(var n=t.length-1;n>=0;n--)t[n].body.id===e.id&&t[n].remove()},R=function(e,t,n){O.Events.on(t,"collisionStart",(function(t){for(var o=0;o<t.pairs.length;o++){var i=t.pairs[o];"player"===i.bodyA.label&&"wall"!==i.bodyB.label?"playerBullet"!==i.bodyB.label&&(e.dead=!0):"player"===i.bodyB.label&&"wall"!==i.bodyA.label&&"playerBullet"!==i.bodyA.label&&(e.dead=!0),"playerBullet"===i.bodyA.label?"barrier"===i.bodyB.label?(i.bodyB.hp--,z(i.bodyA,n)):"enemy"===i.bodyB.label&&(i.bodyB.hp--,z(i.bodyA,n)):"playerBullet"===i.bodyB.label&&("barrier"===i.bodyA.label?(i.bodyA.hp--,z(i.bodyB,n)):"enemy"===i.bodyA.label&&(i.bodyA.hp--,z(i.bodyB,n)))}}))},V={bouncer:function(e){return i.a.createElement("g",{key:e.body.id},i.a.createElement("circle",{className:e.className,cx:e.body.position.x,cy:e.body.position.y,r:e.body.circleRadius,fill:"#FFFF26",filter:"url(#blur)"}),i.a.createElement("circle",{cx:e.body.position.x,cy:e.body.position.y,r:3*e.body.circleRadius/4,fill:"black"}))},bullet:function(e){return i.a.createElement("g",{key:e.body.id},i.a.createElement("circle",{className:"bullet",cx:e.body.position.x,cy:e.body.position.y,r:e.body.circleRadius,stroke:"#FFFF26",fill:"lightpink",strokeWidth:"1"}))},explosion:function(e){return i.a.createElement("g",{key:e.body.id},i.a.createElement("circle",{className:"explosion",cx:e.body.position.x,cy:e.body.position.y,r:e.body.circleRadius,fill:e.coreColor}))},bigBullet:function(e){return i.a.createElement("g",{key:e.body.id},i.a.createElement("circle",{className:e.className,cx:e.body.position.x,cy:e.body.position.y,r:e.body.circleRadius,stroke:"#C24CF6",fill:"black",strokeWidth:"5"}))},surroundBullet:function(e){return i.a.createElement("g",{key:e.body.id},i.a.createElement("circle",{className:"bullet",cx:e.body.position.x,cy:e.body.position.y,r:e.body.circleRadius,stroke:"#FFFF26",fill:"#C24CF6",strokeWidth:"1"}))},laser:function(e){var t="rotate(".concat(180*e.body.angle/Math.PI," ").concat(e.body.position.x," ").concat(e.body.position.y,")");return i.a.createElement("rect",{key:e.body.id,x:e.body.position.x+e.width/-2,y:e.body.position.y+e.height/-2,height:e.height,width:e.width,fill:"red",transform:t})},aimLaser:function(e){var t="rotate(".concat(180*e.body.angle/Math.PI," ").concat(e.body.position.x," ").concat(e.body.position.y,")");return i.a.createElement("rect",{key:e.body.id,x:e.body.position.x+e.width/-2,y:e.body.position.y+e.height/-2,height:e.height,width:e.width,fill:"rgba(255,0,0,0.4)",transform:t})}},D=function(){var e=[1];return i.a.createElement("g",null,e.map((function(e){return i.a.createElement("rect",{key:e,x:Math.ceil(2e3*Math.random())-1e3,y:Math.ceil(1e3*Math.random())-500,width:Math.ceil(3*Math.random()),height:Math.ceil(3*Math.random()),fill:"white"})})),e.map((function(e){return i.a.createElement("rect",{key:e,x:Math.ceil(-2e3*Math.random())-1e3,y:Math.ceil(-1e3*Math.random())-500,width:Math.ceil(3*Math.random()),height:Math.ceil(3*Math.random()),fill:"white"})})))},K=n(13),U=n.n(K),J=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){n.mountJoystick(),window.addEventListener("resize",n.mountJoystick)},n.componentWillUnmount=function(){window.removeEventListener("resize",n.mountJoystick)},n.mountJoystick=function(){n.manager&&(n.manager.get().destroy(),n.manager.destroy());n.manager=U.a.create({zone:document.getElementById("zone"),position:{top:7*n.props.svgHeight/8+n.props.svgHeight/-6+"px",left:n.props.offset+n.props.svgWidth/4+n.props.svgHeight/-6+"px"},mode:"static",size:n.props.svgHeight/3}),n.manager.on("move",(function(e,t){n.props.move(t.angle.degree)})),n.manager.on("end",(function(){n.props.move(-1)})),document.querySelector("#buttonA").style.cssText="\n            height: ".concat(n.props.svgHeight/5,"px; \n            width: ").concat(n.props.svgHeight/5,"px;\n            position: absolute; \n            top: ").concat(3*n.props.svgHeight/4+n.props.svgHeight/5/-2,"px; \n            left: ").concat(n.props.offset+11*n.props.svgWidth/16+n.props.svgHeight/5/-2,"px; \n            border: 3px solid rgba(255,255,255,0.3);\n            background-color: transparent;\n            border-radius: ").concat(n.props.svgHeight/5,"px"),document.querySelector("#buttonB").style.cssText="\n            height: ".concat(n.props.svgHeight/5,"px; \n            width: ").concat(n.props.svgHeight/5,"px;\n            position: absolute; \n            top: ").concat(3*n.props.svgHeight/4+n.props.svgHeight/5/-2,"px; \n            left: ").concat(n.props.offset+13*n.props.svgWidth/16+n.props.svgHeight/5/-2,"px; \n            border: 3px solid rgba(255,255,255,0.3);\n            background-color: transparent;\n            border-radius: ").concat(n.props.svgHeight/5,"px")},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"zone-wrapper"},i.a.createElement("div",{id:"zone"}),i.a.createElement("div",{id:"buttonA",style:this.buttonA,onTouchStart:this.props.blink}),i.a.createElement("div",{id:"buttonB",style:this.buttonB,onTouchStart:this.props.shoot,onTouchMove:this.props.shoot}))}}]),t}(i.a.PureComponent),Z=n(7),q=function e(t){Object(s.a)(this,e);var n=[];this.isOffScreen=function(e,t){return e>1250||e<-1250||t>812.5||t<-812.5},this.timeout=function(e,o){var i=Number(t.timer),r=setInterval((function(){1e3*Math.abs(i-t.timer)>=o&&(e(),clearInterval(r))}),10);n.push(r)}},G=function(e){function t(e,n,o,i,r,a,l){var u;Object(s.a)(this,t);(u=Object(c.a)(this,Object(d.a)(t).call(this,a))).body=O.Bodies.circle(e,n,o,{isSensor:!0,label:"bullet"}),u.timeout((function(){return O.Body.setVelocity(u.body,{x:0,y:i})}),r),u.timeout((function(){return u.remove()}),5e3);var y=setInterval((function(){return u.isOffScreen(u.body.position.x,u.body.position.y)?u.remove():null}),16);return O.World.add(a,u.body),l.push(Object(Z.a)(u)),u.remove=function(){clearInterval(y),O.World.remove(a,u.body);for(var e=l.length-1;e>=0;e--)l[e].body.id===u.body.id&&l.splice(e,1)},u}return Object(u.a)(t,e),t}(q),Y=function(e){function t(e,n,o,i,r,a,l,u,y){var h;Object(s.a)(this,t),(h=Object(c.a)(this,Object(d.a)(t).call(this,u))).options={restitution:1,label:"bouncer"},h.body=O.Bodies.circle(e,n,r,h.options);var p=M.getTargetVelocity(e,n,o,i,a);return O.World.add(u,h.body),y.push(Object(Z.a)(h)),h.timeout((function(){return O.Body.setVelocity(h.body,p)}),l),h.timeout((function(){return h.remove()}),5e3),h.remove=function(){O.World.remove(u,h.body);for(var e=y.length-1;e>=0;e--)y[e].body.id===h.body.id&&y.splice(e,1)},h}return Object(u.a)(t,e),t}(q),$=function(e){function t(e,n,o,i,r,a,l,u,y){var h;Object(s.a)(this,t),(h=Object(c.a)(this,Object(d.a)(t).call(this,u))).body=O.Bodies.circle(e,n,r,{isSensor:!0,label:"bullet"});var p=M.getTargetVelocity(e,n,o,i,a);O.World.add(u,h.body),y.push(Object(Z.a)(h)),h.timeout((function(){return O.Body.setVelocity(h.body,p)}),l),h.timeout((function(){return h.remove()}),4e3),h.isOffScreen=function(e,t){return e>1250||e<-1250||t>812.5||t<-812.5};var m=setInterval((function(){return h.isOffScreen(h.body.position.x,h.body.position.y)?h.remove():null}),16);return h.remove=function(){clearInterval(m),O.World.remove(u,h.body);for(var e=y.length-1;e>=0;e--)y[e].body.id===h.body.id&&y.splice(e,1)},h}return Object(u.a)(t,e),t}(q),Q=function(e){function t(e,n,o,i,r,a,l,u){var y;Object(s.a)(this,t),y=Object(c.a)(this,Object(d.a)(t).call(this,l));var h=[];y.body=O.Bodies.circle(e,n,i,{isSensor:!0,label:"bullet"}),y.redirect=!1,O.World.add(l,y.body),u.push(Object(Z.a)(y));var p=setInterval((function(){if(y.redirect){var e=M.getTargetVelocity(y.body.position.x,y.body.position.y,o.x,o.y,r);O.Body.setVelocity(y.body,e)}}),16);y.timeout((function(){return y.redirect=!0}),a),y.timeout((function(){return y.redirect=!1}),a+750),y.timeout((function(){return y.remove()}),4e3);var m=setInterval((function(){return y.isOffScreen(y.body.position.x,y.body.position.y)?y.remove():null}),16);return h.push(p,m),y.remove=function(){h.forEach((function(e){return clearInterval(e)})),O.World.remove(l,y.body);for(var e=0;e<u.length;e++)u[e].body.id===y.body.id&&u.splice(e,1)},y}return Object(u.a)(t,e),t}(q),X=function e(t,n,o,i,r,a,l){var c=this;Object(s.a)(this,e),this.body=O.Bodies.rectangle(t+o/2,n,o,i,{isSensor:!0,label:"laser"}),this.height=i,this.width=o,O.Body.rotate(this.body,r,{x:t,y:n}),O.World.add(a,this.body),l.push(this),this.rotate=function(e){return O.Body.rotate(c.body,e,{x:t,y:n})},this.remove=function(){O.World.remove(a,c.body);for(var e=0;e<l.length;e++)l[e].body.id===c.body.id&&l.splice(e,1)}},_=function e(t,n,o,i,r,a,l){var c=this;Object(s.a)(this,e),this.body=O.Bodies.rectangle(t+o/2,n,o,i,{isSensor:!0,label:"aimLaser"}),this.height=i,this.width=o,O.Body.rotate(this.body,r,{x:t,y:n}),l.push(this),this.remove=function(){O.World.remove(a,c.body);for(var e=0;e<l.length;e++)l[e].body.id===c.body.id&&l.splice(e,1)}},ee=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){R(n.player,n.engine,n.playerBullets),"keyboard"===n.props.playMode&&(window.addEventListener("keydown",n.handleKeyDown,!0),window.addEventListener("keyup",n.handleKeyUp,!0)),n.intervals.push(n.cycle),O.Runner.run(n.runner,n.engine),n.cycle()},n.componentWillUnmount=function(){O.Runner.stop(n.runner),cancelAnimationFrame(n.loop),n.intervals.forEach((function(e){return clearInterval(e)})),n.timeouts.forEach((function(e){return clearTimeout(e)})),"keyboard"===n.props.playMode&&(window.removeEventListener("keydown",n.handleKeyDown,!0),window.removeEventListener("keyup",n.handleKeyUp,!0))},n.cycle=function(){n.updateCycle(),n.loop=requestAnimationFrame((function(){return n.cycle()}))},n.next=function(){n.schedule[n.step.next().value]()},n.togglePause=function(){n.pause?(n.cycle(),O.Runner.run(n.runner,n.engine),n.pause=!1):(cancelAnimationFrame(n.loop),O.Runner.stop(n.runner),n.pause=!0)},n.updateCycle=function(){!0===n.player.dead&&(window.removeEventListener("keydown",n.handleKeyDown,!0),window.removeEventListener("keyup",n.handleKeyUp,!1),cancelAnimationFrame(n.loop),O.Runner.stop(n.runner),n.timeouts.forEach((function(e){return clearTimeout(e)}))),"keyboard"===n.props.playMode&&n.player.movement&&(n.player.direction={x:0,y:0},n.playerMovementMap.forEach((function(e){"a"===e?n.player.direction.x-=n.player.speed:"d"===e&&(n.player.direction.x+=n.player.speed),"w"===e?n.player.direction.y-=n.player.speed:"s"===e&&(n.player.direction.y+=n.player.speed),"k"===e&&n.blink(n.player.direction.x,n.player.direction.y),"l"===e&&n.shoot()}))),O.Body.setVelocity(n.player.body,n.player.direction),n.setState((function(e){for(var t=0;t<n.barriers.length;t++)n.barriers[t].body.hp<2*n.barriers[t].danger&&(n.barriers[t].className="barrier damaged"),n.barriers[t].body.hp<n.barriers[t].danger&&(n.barriers[t].className="barrier danger"),n.barriers[t].body.hp<=0&&(n.barriers[t].remove(),n.barriers.splice(t,1),t--);for(var o=0;o<n.enemies.length;o++)n.enemies[o].body.hp<=0&&(n.enemies[o].remove(),n.enemies.splice(o,1),o--,n.props.victory());Object.assign({},e.player),Object.assign({},e.playerBullets),Object.assign({},e.bullets),Object.assign({},e.bouncers),Object.assign({},e.barriers),Object.assign({},e.enemies);var i=Number(n.world.timer);String(e.message);return{player:n.player,playerBullets:n.playerBullets,bullets:n.bullets,bouncers:n.bouncers,enemies:n.enemies,barriers:n.barriers,timer:i,message:n.message}}))},n.handleTouch=function(e){n.player.movement&&(n.player.direction=-1===e?{x:0,y:0}:e>22.5&&e<67.5?{x:n.player.speed,y:-n.player.speed}:e>67.5&&e<112.5?{x:0,y:-n.player.speed}:e>112.5&&e<157.5?{x:-n.player.speed,y:-n.player.speed}:e>157.5&&e<202.5?{x:-n.player.speed,y:0}:e>202.5&&e<247.5?{x:-n.player.speed,y:n.player.speed}:e>247.5&&e<292.5?{x:0,y:n.player.speed}:e>292.5&&e<337.5?{x:n.player.speed,y:n.player.speed}:{x:n.player.speed,y:0})},n.timeout=function(e,t){var o=Number(n.world.timer),i=setInterval((function(){1e3*Math.abs(o-n.world.timer)>=t&&(e(),clearInterval(i))}),10);n.intervals.push(i)},n.handleKeyDown=function(e){"p"===e.key?n.togglePause():-1===n.playerMovementMap.indexOf(e.key)&&n.playerMovementMap.push(e.key)},n.handleKeyUp=function(e){n.playerMovementMap.splice(n.playerMovementMap.indexOf(e.key),1)},n.blink=function(){if(!0!==n.player.blinkOnCooldown&&n.player.movement){n.player.blinkOnCooldown=!0;var e,t,o=setTimeout((function(){return n.player.blinkOnCooldown=!1}),125);if(n.timeouts.push(o),0===n.player.direction.x&&0===n.player.direction.y)e=n.player.body.position.x,t=n.player.body.position.y-n.player.blinkDistance;else{var i=Math.atan2(n.player.body.position.y+n.player.direction.y-n.player.body.position.y,n.player.body.position.x+n.player.direction.x-n.player.body.position.x);i=(i=360*(i>0?i:2*Math.PI+i)/(2*Math.PI))*Math.PI/180,e=n.player.body.position.x+n.player.blinkDistance*Math.cos(i),t=n.player.body.position.y+n.player.blinkDistance*Math.sin(i)}Math.abs(e)>950&&(e=n.player.direction.x/Math.abs(n.player.direction.x)*950),Math.abs(t)>512.5&&(t=n.player.direction.y/Math.abs(n.player.direction.y)*512.5),O.Body.setPosition(n.player.body,{x:e,y:t})}},n.shoot=function(){if(!0!==n.player.bulletOnCooldown&&n.player.movement){n.player.bulletOnCooldown=!0;var e=new N(n.player.body.position.x,n.player.body.position.y-50,5,n.world,n.playerBullets);n.playerBullets.push(e);var t=setTimeout((function(){return n.player.bulletOnCooldown=!1}),100);n.timeouts.push(t)}},n.setMessage=function(e,t){for(var o=String(e).split(""),i="",r=function(e){n.timeout((function(){i+=o[e],n.message=i}),100*e)},a=0;a<o.length;a++)r(a);n.timeout((function(){t&&t()}),100*o.length+500)},n.moveBody=function(e,t,o,i,r){if(n.checkIfInArea(e.position.x,t,i)&&n.checkIfInArea(e.position.y,o,i))O.Body.setVelocity(e,{x:0,y:0}),O.Body.setPosition(e,{x:t,y:o}),r&&r();else{var a=M.getTargetVelocity(e.position.x,e.position.y,t,o,i);O.Body.setVelocity(e,a),n.timeout((function(){return n.moveBody(e,t,o,i,r)}),5)}},n.checkIfInArea=function(e,t,n){return Math.abs(t-e)<n},n.theStart=function(){window.removeEventListener("keydown",n.theStart),window.removeEventListener("touchstart",n.theStart),n.player.movement=!0,n.setMessage(" ",n.next)},n.theEnd=function(){var e=new $(n.enemy.body.position.x||0,n.enemy.body.position.y||0,10,5,5,0,0,n.world,n.bullets);e.body.label="explosion",e.coreColor=n.enemy.coreColor||"red";var t=O.Composite.create();O.Composite.add(t,e.body);for(var o=0;o<150;o++)n.timeout((function(){return O.Composite.scale(t,1.05,1.05,{x:e.body.position.x,y:e.body.position.y},!1)}),16*o)},n.renderScene=function(){return!0!==n.player.dead?i.a.createElement(i.a.Fragment,null,i.a.createElement(D,null),i.a.createElement("text",{x:"0",y:"0",stroke:"white",fill:"white",fontSize:"100",fontFamily:"Arial Black",textAnchor:"middle"},String(n.state.message)),i.a.createElement("filter",{id:"blur"},i.a.createElement("feGaussianBlur",{stdDeviation:"2"})),n.state.bullets.map((function(e){return V[e.body.label](e)})),n.state.playerBullets.map((function(e){return i.a.createElement("circle",{key:n.state.playerBullets.indexOf(e),cx:e.body.position.x,cy:e.body.position.y,r:e.radius,fill:"white"})})),n.state.enemies.map((function(e){return S[e.name](e.body.position.x,e.body.position.y,e.body.circleRadius,e.coreColor,e.className)})),n.state.barriers.map((function(e){return i.a.createElement("circle",{className:e.className,key:n.state.barriers.indexOf(e),cx:e.body.position.x,cy:e.body.position.y,r:e.radius,fill:"transparent"})})),v(n.state.player.body.position.x-n.state.player.width/2,n.state.player.body.position.y-n.state.player.height/2,n.state.player.width,n.state.player.height),i.a.createElement("circle",{id:"player-radius",cx:n.state.player.body.position.x,cy:n.state.player.body.position.y,r:n.state.player.blinkDistance,stroke:"rgba(255,255,255,0.5",fill:"transparent"})):i.a.createElement(T,{x:n.state.player.body.position.x,y:n.state.player.body.position.y,width:n.state.player.width,height:n.state.player.height,restart:n.props.restart})},n.state={player:null,playerBullets:[],walls:[],bullets:[],bouncers:[],timer:0,barriers:[],enemies:[],message:""},n.message="",n.timeouts=[],n.intervals=[],n.pause=!1,n.schedule=[],n.engine=O.Engine.create(),n.world=n.engine.world,n.world.timer=0,n.runner=O.Runner.create(),n.world.gravity.y=0,n.enemies=[],n.barriers=[],n.bullets=[],n.bouncers=[],n.playerBullets=[],n.playerMovementMap=[],n.state.walls=new L(n.world).walls,n.player=new F(0,300,20,20,{},n.world),n.player.body.label="player",n.player.direction={x:0,y:0},n.player.speed=7,n.player.movement=!1,n.player.blinkDistance=100,n.state.player=n.player,O.Events.on(n.engine,"beforeUpdate",(function(e){n.world.timer=Number(n.world.timer)+.016666,n.world.timer=Math.round(100*n.world.timer)/100})),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"scheduleStart",value:A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:return e.next=4,t++;case 4:e.next=1;break;case 6:case"end":return e.stop()}}),e)}))},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(y,null,this.renderScene()),"touchscreen"===this.props.playMode&&!0!==this.player.dead&&i.a.createElement(J,{svgHeight:this.props.svgHeight,svgWidth:this.props.svgWidth,innerHeight:this.props.innerHeight,innerWidth:this.props.innerWidth,offset:this.props.offset,move:function(t){return e.handleTouch(t)},blink:function(){return e.blink()},shoot:function(){return e.shoot()}}))}}]),t}(i.a.Component),te=(n(21),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).intro=function(){e.moveBody(e.enemy.body,0,-350,2,(function(){e.timeout((function(){e.outerBarrier=new W(0,-350,70,225,e.world),e.barriers.push(e.outerBarrier)}),1e3),e.timeout((function(){e.props.showIntro?e.setMessage("ENEMY #1: SAKURA",(function(){window.addEventListener("touchstart",e.theStart),window.addEventListener("keydown",e.theStart)})):(e.player.movement=!0,e.next())}),2e3)}))},e.firstBarrage=function(){e.wave(-1e3,0,1),e.timeout((function(){return e.wave(1e3,0,-1)}),3e3),e.timeout((function(){return e.wave(-1e3,-200,1)}),6e3),e.timeout((function(){return e.wave(1e3,-200,-1)}),9e3),e.timeout((function(){return e.next()}),14e3)},e.wave=function(t,n,o){for(var i=function(i){e.timeout((function(){new G(t+25*i*o,n+i*Math.sin(i*Math.PI/4*-1+.5),5,15,1e3,e.world,e.bullets)}),25*i)},r=0;r<100;r++)i(r)},e.secondBarrage=function(){e.surround(450),e.timeout((function(){return e.surround(350)}),3e3),e.timeout((function(){return e.surround(300)}),6e3),e.timeout((function(){return e.surround(250)}),9e3),e.timeout((function(){return e.next()}),14e3)},e.surround=function(t){for(var n=t,o=2*Math.PI/50,i=0,r=e.player.body.position,a=r.x,s=r.y,l=function(t,o){i++,e.timeout((function(){new $(n*Math.cos(t)+a,-n*Math.sin(t)+s,a,s,5,20,1e3-10*o,e.world,e.bullets)}),10*i)},c=0,d=0;c<2*Math.PI;c+=o,d++)l(c,d)},e.thirdBarrage=function(){e.bouncerCluster(850,-350),e.timeout((function(){return e.bouncerCluster(-850,-350)}),4e3),e.timeout((function(){return e.bouncerCluster(850,-350)}),8e3),e.timeout((function(){return e.bouncerCluster(-850,-350)}),12e3),e.timeout((function(){return e.next()}),15e3)},e.bouncerCluster=function(t,n){for(var o=0;o<4;o++)e.timeout((function(){new Y(t,n,e.player.body.position.x,e.player.body.position.y,50,35,100,e.world,e.bullets).className="bouncer"}),500*o)},e.fourthBarrage=function(){e.cascade(0,-250,1500),e.timeout((function(){return e.cascade(0,-250,1500)}),3e3),e.timeout((function(){return e.cascade(0,-250,1500)}),6e3),e.timeout((function(){return e.next()}),9e3)},e.cascade=function(t,n,o){var i=new Q(t,n,e.player.body.position,40,20,o,e.world,e.bullets);i.body.label="bigBullet",i.className="bouncer";for(var r=function(i){e.timeout((function(){var r=new Q(t+150*i,n-50*i,e.player.body.position,40,20,o-25*i,e.world,e.bullets);r.body.label="bigBullet",r.className="bouncer"}),25*i)},a=1;a<=5;a++)r(a);for(var s=function(i){e.timeout((function(){var r=new Q(t-150*i,n-50*i,e.player.body.position,40,20,o-25*i,e.world,e.bullets);r.body.label="bigBullet",r.className="bouncer"}),25*i)},l=1;l<=5;l++)s(l)},e.enemy=new P(0,-700,50,5,e.world),e.enemy.name="sakura",e.enemy.coreColor="pink",e.enemy.className="sakura",e.enemies.push(e.enemy),e.schedule.push((function(){return e.intro()}),(function(){return e.firstBarrage()}),(function(){return e.secondBarrage()}),(function(){return e.thirdBarrage()}),(function(){return e.fourthBarrage()}),(function(){e.outerBarrier.className="",e.next()}),(function(){return e.timeout((function(){return e.theEnd()}),5e3)})),e.step=e.scheduleStart(),e.schedule[e.step.next().value](),e}return Object(u.a)(t,e),t}(ee)),ne=(n(22),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).fireBarrage=function(){e.bloodFire(),e.timeout((function(){return e.bloodFire()}),500),e.timeout((function(){return e.bloodFire()}),1e3),e.timeout((function(){return e.bloodFire()}),1500),e.timeout((function(){return e.bloodFire()}),2e3)},e.bloodFire=function(){for(var t=0;t<3;t++)e.timeout((function(){return new $(e.enemy.body.position.x,e.enemy.body.position.y,e.player.body.position.x,e.player.body.position.y,5,20,0,e.world,e.bullets)}),50*t)},e.intro=function(){e.timeout((function(){e.enableOrbit=!1,[e.enemy,e.phobos,e.deimos].forEach((function(e){return e.className="blood"})),e.moveBody(e.phobos.body,0,-425,.4,(function(){return e.moveBody(e.deimos.body,0,-275,.4,(function(){return e.timeout((function(){return e.rotateBlood(270*Math.PI/180,4,(function(){e.props.showIntro?e.setMessage("ENEMY #2: BLOOD",(function(){window.addEventListener("touchstart",e.theStart),window.addEventListener("keydown",e.theStart)})):(e.player.movement=!0,e.next())}))}),500)}))}))}),2e3)},e.horizontalClean=function(t,n){e.moveBody(e.phobos.body,t,n,15,e.next),e.moveBody(e.deimos.body,-t,n,15,e.next)},e.verticalClean=function(t,n){e.moveBody(e.phobos.body,t,n,15,e.next),e.moveBody(e.deimos.body,t,-n,15,e.next)},e.horizontalSweep=function(t){var n=new _(e.deimos.body.position.x,e.deimos.body.position.y,Math.abs(e.phobos.body.position.x-e.deimos.body.position.x),5,0,e.world,e.bullets);e.timeout((function(){n.remove();var o=new X(e.deimos.body.position.x,e.deimos.body.position.y,Math.abs(e.phobos.body.position.x-e.deimos.body.position.x),5,0,e.world,e.bullets),i=O.Composite.create();O.Composite.add(i,o.body),O.Composite.add(i,e.deimos.body),O.Composite.add(i,e.phobos.body);for(var r=0;r<2*Math.abs(t)/8;r++)t>0?e.timeout((function(){return O.Composite.translate(i,{x:0,y:-8})}),8*r):e.timeout((function(){return O.Composite.translate(i,{x:0,y:8})}),8*r);e.timeout((function(){o.remove(),e.next()}),2*Math.abs(t)/8*8)}),1e3)},e.verticalSweep=function(t){var n=new _(e.deimos.body.position.x,e.deimos.body.position.y,1e3,5,90*Math.PI/180,e.world,e.bullets);e.timeout((function(){n.remove();var o=new X(e.deimos.body.position.x,e.deimos.body.position.y,1e3,5,90*Math.PI/180,e.world,e.bullets),i=O.Composite.create();O.Composite.add(i,o.body),O.Composite.add(i,e.deimos.body),O.Composite.add(i,e.phobos.body);for(var r=0;r<2*Math.abs(t)/8;r++)t>0?e.timeout((function(){return O.Composite.translate(i,{x:-8,y:0})}),8*r):e.timeout((function(){return O.Composite.translate(i,{x:8,y:0})}),8*r);e.timeout((function(){o.remove(),e.next()}),2*Math.abs(t)/8*8)}),1e3)},e.finale=function(){e.enableOrbit=!0,e.setOrbitSpeed(100,(function(){e.timeout((function(){return e.explosion(100)}),1e3),e.timeout((function(){return e.explosion(100)}),3e3),e.timeout((function(){return e.explosion(100)}),5e3),e.timeout((function(){return e.next()}),7e3)}))},e.explosion=function(t){for(var n=t,o=2*Math.PI/40,i=function(t){e.timeout((function(){new $(e.enemy.body.position.x+n*Math.cos(t),e.enemy.body.position.y+n*Math.sin(t),e.enemy.body.position.x+2*n*Math.cos(t),e.enemy.body.position.y+2*n*Math.sin(t),5,20,1500,e.world,e.bullets)}),t/(2*Math.PI/40)*16)},r=0;r<2*Math.PI;r+=o)i(r)},e.waveBarrage=function(){e.wave(150),e.timeout((function(){return e.wave(125)}),1e3),e.timeout((function(){return e.wave(100)}),2e3),e.timeout((function(){return e.next()}),2e3)},e.wave=function(t){for(var n=t,o=0,i=30*Math.random(),r=2*Math.PI/(i+20),a=function(t,i){o++;var r=setTimeout((function(){new $(n*Math.cos(t)+e.enemy.body.position.x,n*Math.sin(t)+e.enemy.body.position.y,500*Math.cos(t)+e.enemy.body.position.x,500*Math.sin(t)+e.enemy.body.position.y,5,30,1e3-15*i,e.world,e.bullets)}),15*o);e.timeouts.push(r)},s=30*Math.PI/180,l=0;s<=150*Math.PI/180;s+=r,l++)a(s,l)},e.deploy=function(t,n,o,i){e.enableOrbit=!1,e.moveBody(e.phobos.body,t+e.phobos.body.position.x-e.enemy.body.position.x,n+e.phobos.body.position.y-e.enemy.body.position.y,o),e.moveBody(e.deimos.body,t+e.deimos.body.position.x-e.enemy.body.position.x,n+e.deimos.body.position.y-e.enemy.body.position.y,o),e.moveBody(e.enemy.body,t,n,o,i)},e.aimAndRotate=function(t){var n=M.getTheta(e.phobos.body.position.x,e.phobos.body.position.y,e.player.body.position.x,e.player.body.position.y),o=M.getTheta(e.deimos.body.position.x,e.deimos.body.position.y,e.player.body.position.x,e.player.body.position.y),i=new _(e.phobos.body.position.x,e.phobos.body.position.y,2e3,5,n,e.world,e.bullets),r=new _(e.deimos.body.position.x,e.deimos.body.position.y,2e3,5,o,e.world,e.bullets);e.timeout((function(){i.remove(),r.remove();for(var a=new X(e.phobos.body.position.x,e.phobos.body.position.y,2e3,5,n,e.world,e.bullets),s=new X(e.deimos.body.position.x,e.deimos.body.position.y,2e3,5,o,e.world,e.bullets),l=0;l<2*Math.PI/(Math.PI/180);l++)e.timeout((function(){a.rotate(Math.PI/180),s.rotate(Math.PI/-180)}),12*l);e.timeout((function(){a.remove(),s.remove(),t()}),2*Math.PI/(Math.PI/180)*12+500)}),1e3)},e.rotateBlood=function(t,n,o){for(var i=0;i<t/(2*Math.PI/180);i++)e.timeout((function(){return O.Composite.rotate(e.blood,2*Math.PI/180,{x:e.enemy.body.position.x,y:e.enemy.body.position.y})}),i*(16/n));o&&e.timeout((function(){return o()}),t/(2*Math.PI/180)*(16/n)+500)},e.setOrbitSpeed=function(t,n){for(var o=0,i=0;i<Math.abs(e.orbitSpeedPower-t);i++){o++;var r=setTimeout((function(){return e.orbitSpeedPower<t?e.orbitSpeedPower+=1:e.orbitSpeedPower-=1}),25*i);e.timeouts.push(r)}return n&&e.timeout(n,25*o),25*o},e.enemy=new P(0,-350,50,225,e.world),e.enemy.name="blood",e.enemy.coreColor="red",e.enemy.className="appear",e.phobos=new j(0,-325,5,e.world),e.phobos.name="satellite",e.phobos.coreColor="red",e.phobos.className="appear",e.deimos=new j(0,-375,5,e.world),e.deimos.name="satellite",e.deimos.coreColor="red",e.deimos.className="appear",e.blood=O.Composite.create(),O.Composite.add(e.blood,e.enemy.body),O.Composite.add(e.blood,e.phobos.body),O.Composite.add(e.blood,e.deimos.body),O.World.add(e.world,[e.enemy.body,e.phobos.body,e.deimos.body]),e.enemies.push(e.enemy,e.phobos,e.deimos),e.enableOrbit=!0,e.orbitMaxSpeed=15*Math.PI/180,e.orbitSpeedPower=5,e.orbit=setInterval((function(){!0===e.enableOrbit&&O.Composite.rotate(e.blood,e.orbitMaxSpeed*e.orbitSpeedPower/100,{x:e.enemy.body.position.x,y:e.enemy.body.position.y})}),8),e.bloodyCheck=setInterval((function(){e.enemy.body.hp<e.enemy.body.maxHp/2&&(e.enemy.className="blood bloodied"),clearInterval(e.bloodyCheck)}),20),e.intervals.push(e.orbit,e.bloodyCheck),e.schedule.push((function(){return e.intro()}),(function(){return e.timeout(e.next,500)}),(function(){return e.deploy(-800,-200,10,(function(){return e.timeout(e.next,500)}))}),(function(){return e.rotateBlood(270*Math.PI/180,4,(function(){return e.timeout(e.next,500)}))}),(function(){return e.aimAndRotate((function(){return e.timeout(e.next,1e3)}))}),(function(){return e.deploy(800,-200,20,(function(){return e.timeout(e.next,500)}))}),(function(){return e.rotateBlood(180*Math.PI/180,4,(function(){return e.timeout(e.next,500)}))}),(function(){return e.aimAndRotate((function(){return e.timeout(e.next,1e3)}))}),(function(){return e.deploy(0,-350,10,(function(){return e.timeout(e.next,500)}))}),(function(){return e.rotateBlood(270*Math.PI/180,4,(function(){return e.timeout(e.next,0)}))}),(function(){return e.waveBarrage()}),(function(){return e.timeout((function(){return e.rotateBlood(180*Math.PI/180,4,e.next)}),0)}),(function(){return e.waveBarrage()}),(function(){return e.rotateBlood(450*Math.PI/180,2,(function(){return e.timeout(e.next,500)}))}),(function(){return e.verticalClean(925,500)}),(function(){return e.fireBarrage()}),(function(){return e.verticalSweep(925)}),(function(){return e.horizontalClean(925,500)}),(function(){return e.fireBarrage()}),(function(){return e.horizontalSweep(500)}),(function(){return e.verticalClean(-925,500)}),(function(){return e.fireBarrage()}),(function(){return e.verticalSweep(-925)}),(function(){return e.horizontalClean(925,-500)}),(function(){return e.fireBarrage()}),(function(){return e.horizontalSweep(-500)}),(function(){return e.timeout(e.next,1e3)}),(function(){e.moveBody(e.enemy.body,0,0,10,e.next),e.moveBody(e.phobos.body,0,-75,10,e.next),e.moveBody(e.deimos.body,0,75,10,(function(){return e.timeout(e.next,1e3)}))}),(function(){return null}),(function(){return null}),(function(){return e.rotateBlood(360*Math.PI/180,2,e.next)}),(function(){return e.finale()}),(function(){return e.finale()}),(function(){return e.timeout((function(){return e.theEnd()}),5e3)})),e.step=e.scheduleStart(),e.schedule[e.step.next().value](),e}return Object(u.a)(t,e),t}(ee)),oe=function(){return i.a.createElement(y,null,i.a.createElement("text",{fill:"white",fontSize:"32",alignmentBaseline:"central",textAnchor:"middle"},"Victory!!!"),v(-15,-115,30,30),i.a.createElement("rect",{fill:"white",height:"100%",width:"100%",x:"-50%",y:"-50%",className:"disappear",pointerEvents:"none"}))},ie=(n(23),function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){window.addEventListener("resize",n.resize)},n.componentWillUnmount=function(){window.removeEventListener("resize",n.resize)},n.resize=function(){var e=window.innerHeight>9*window.innerWidth/16?9*window.innerWidth/16:window.innerHeight,t=window.innerHeight>9*window.innerWidth/16?window.innerWidth:16*window.innerHeight/9;n.setState({svgHeight:e,svgWidth:t,innerWidth:window.innerWidth,innerHeight:window.innerHeight,offset:(window.innerWidth-t)/2})},n.selectEnemy=function(e){n.setState({enemySelected:e}),n.game()},n.game=function(){n.setState((function(e){return{currentScene:e.enemySelected}}))},n.controller=function(){n.setState({currentScene:"controller"})},n.keyboard=function(){n.setState({playMode:"keyboard",currentScene:"start"})},n.touchscreen=function(){n.setState({playMode:"touchscreen",currentScene:"start"})},n.start=function(){n.setState({currentScene:"select"})},n.restart=function(){n.setState({showIntro:!1,currentScene:"select"})},n.victory=function(){n.setState({currentScene:"victory"})};var o=window.innerHeight>9*window.innerWidth/16?9*window.innerWidth/16:window.innerHeight,i=window.innerHeight>9*window.innerWidth/16?window.innerWidth:16*window.innerHeight/9;return n.state={currentScene:"start",enemySelected:!1,playMode:"keyboard",svgHeight:o,svgWidth:i,innerWidth:window.innerWidth,innerHeight:window.innerHeight,offset:(window.innerWidth-i)/2,showIntro:!0,sakura:!0,blood:!0,nul:!1,vida:!1},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"svg-container"},"start"===this.state.currentScene&&i.a.createElement(w,{start:this.start,controller:this.controller}),"controller"===this.state.currentScene&&i.a.createElement(f,{keyboard:this.keyboard,touchscreen:this.touchscreen}),"select"===this.state.currentScene&&i.a.createElement(I,{blood:this.state.blood,sakura:this.state.sakura,vida:this.state.vida,nul:this.state.nul,enemySelected:this.state.enemySelected,select:this.selectEnemy}),"scene1"===this.state.currentScene&&i.a.createElement(te,{svgHeight:this.state.svgHeight,svgWidth:this.state.svgWidth,innerHeight:this.state.innerHeight,innerWidth:this.state.innerWidth,offset:this.state.offset,playMode:this.state.playMode,victory:this.victory,restart:this.restart,showIntro:this.state.showIntro}),"scene2"===this.state.currentScene&&i.a.createElement(ne,{svgHeight:this.state.svgHeight,svgWidth:this.state.svgWidth,innerHeight:this.state.innerHeight,innerWidth:this.state.innerWidth,offset:this.state.offset,playMode:this.state.playMode,victory:this.victory,restart:this.restart,showIntro:this.state.showIntro}),"victory"===this.state.currentScene&&i.a.createElement(oe,null))}}]),t}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[14,1,2]]]);
//# sourceMappingURL=main.1a032aac.chunk.js.map